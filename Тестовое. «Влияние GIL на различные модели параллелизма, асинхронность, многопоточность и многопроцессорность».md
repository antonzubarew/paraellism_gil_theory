## План 

1. Введение 
* Кратко объяснить, что такое GIL и зачем он нужен.
* Упомянуть ключевую проблему GIL
2. Основная часть
Разбейте статью на логически самостоятельные части, каждая из которых посвящена одному аспекту параллелизма:
- GIL и многопоточный код
- GIL и асинхронный код
- GIL и многопроцессорный код
3. Заключение
- Сравнение подходов: когда использовать потоки, асинхронность или процессы.
- Добавьте рекомендации по дальнейшему изучении темы


## Тестовое задание 

### Введение 

Популярность языка Python обусловлена его универсальностью и большим количеством библиотек и фреймворков для широкого спектра задач. Одновременно для него характерен принцип, влияющий на производительность. Он называется GIL.

#### GIL
GIL (Global Interpreter Lock) - это глобальная блокировка интерпретатора, которая позволяет только одному потоку выполнять байт-код Python в один момент времени. 

Для того, чтобы полностью понять, что такое GIL, нужно более детально разобраться с несколькими понятиями. 

#### Работа интерпретатора
Начнем с того, что такое интерпретатор. Интерпретатор Python - компонент языка Python, преобразующий Python-код в байт-код (низкоуровневый код для управления платформой (железом)), который запускается на виртуальной машине (PVM). Процесс интерпретации состоит из нескольких этапов. Изначально, интерпретатор читает код, проверяя форматирование и синтаксис. При обнаружении ошибки он останавливается и возвращает сообщение об ошибке. Далее, происходит компиляция: исходные инструкции (код) переводится в низкоуровневый код. После - код выполняется на виртуальной машине.
![[Pasted image 20250209221351.png]]

#### Потоки и процессы
Теперь обратим внимание на то, что такое поток. Полное представление о потоке невозможно без понимания, что такое процесс. Процессом называется активная фаза выполнения программы с выделенными для нее ресурсами (или экземпляр запущенной программы с собственным пространством памяти). Как правило, память как ресурс в одном процессе изолирована от памяти другого процесса. 

Процесс состоит из следующих компонентов: 
- Сама программа;
- Связанные с ней данные (переменные, виртуальное окружение и т.д.);
- Контекст выполнения программы (окружение, в котором проводится выполнение кода)

Когда запускается процесс, потоки делят память и ресурсы. 
![[Pasted image 20250209224711.png]]

Однопоточный процесс может выполнять одну задачу за раз, многопоточный - несколько. Выполнение нескольких потоков на одном физическом ядре невозможно. Поэтому, чем больше физических ядер, тем больше будет обрабатываться потоков одновременно. Параллельная работа процессов на одном ядре достигается за счет переключения потоков.
![[Pasted image 20250209230010.png]]

![[Pasted image 20250209230402.png]]

Переключение потоков иногда может быть нестабильным. Такое состояние называется "Состоянием гонки". Это ситуация, когда  два или более потока обращаются к одному и тому же ресурсу и одновременно совершают операции над ним. В результате действия потоков могут пересекаться, и результат оказывается непредсказуемым.

Для стабильной работы процессов и избегания состояния гонки был введен GIL. 
#### GIL в Python

Кроме избегания состояния гонки GIL в Python был введен для безопасности других ошибок синхронизации в коде. Без GIL пришлось бы создать сложное управление синхронизацией для всех общих данных.
Негативными моментами GIL являются ограничение параллельности вычислений. Эта проблема остро отражается в момент развития ИИ, когда скорость вычислений начинает играть ключевую роль. Также возможен риск "голодания" потоков. Если один поток надолго захватывает GIL, другие потоки блокируются, что приводит к снижению отзывчивости приложения. Это может вызвать задержки в реальных приложениях

#### CPU-bound и IO-bound операции 

Уделим внимание CPU-bound и IO-bound операциям. Они также могут влиять скорость выполнения кода. 

CPU-bound операции - операции, которые требуют большой вычислительной мощности процессора. Например, для задач математических расчетов, обработкой изображений.

IO-bound операции- операции, при выполнении которых основным фактором, ограничивающим производительность является скорость ввода/вывода, а не процессор. В основном, это задачи ввода-вывода: загрузка из внешнего источника, запрос в БД, запись данных в файл и т.д. Так как такие операции зависят от ввода-вывода данных, они снижают общую производительность системы.

![[Pasted image 20250210093124.png]]
### Параллелизм в Python 

#### Многозадачность в Python

Несмотря на ограничения GIL в Python, существуют способы повышения эффективности работы кода и достижения параллелизма. 

Известны 3 способа:

- Многопоточность
- Ассинхронность
- Многопроцессорность 

#### Многопоточность 

Многопоточность в Python предполагает одновременный запуск нескольких потоков в рамках одного процесса и использования нескольких ядер процессора.

Многопоточность в Python больше подходит IO-bound задач, задач ввода-вывода информации. 

Для работы с потоками в Python можно использовать стандартную библиотеку `threading`. В этой библиотеке поток представлен классом `Thread`. Для класса доступны следующие параметры:
- `target` - параметр указывает на объект, который должен использовать многопоточность (по умолчанию равен None, ничего не исполняется);
- `name` - параметр означает имя потока (по умолчанию имя генерируется автоматически).

![[Pasted image 20250210144656.png]]

При использовании принципа многопоточности, ускорение IO-bound процессов достигается за счет переключения между потоками.
#### Ассинхронность


#### Многопроцессорность 